<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
		<title>Web Apps</title>
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@4.1.0/dist/reset.css">
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@4.1.0/dist/reveal.css">
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@4.1.0/dist/theme/simple.css" id="theme">
		<link rel="stylesheet" href="../css/mono-blue.css">
		<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inconsolata|Roboto:300,400,500|Work+Sans:400,700">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.16/dist/katex.min.css" integrity="sha384-6LkG2wmY8FK9E0vU9OOr8UvLwsaqUg9SETfpq4uTCN1agNe8HRdE9ABlk+fVx6gZ" crossorigin="anonymous">
		<style>
			.reveal {
				font-family: "Work Sans", sans-serif;
			}

			.reveal .slides section {
				text-align: left;
				font-size: smaller;
			}

			.reveal pre {
				background-color: #f5f5f5;
				width: 100%;
				border: 1px solid #ccc;
				border-radius: 4px;
				box-shadow: none;
			}

			.reveal h1, .reveal h2, .reveal h3, .reveal h4, .reveal h5, .reveal h6 {
				font-family: "Roboto", sans-serif;
				color: #0072c1;
			}

			.reveal section.heading-only {
				text-align:center;
				padding-top:20%;
			}

            .no-code-badge .code-badge {
                display: none;
            }

            .code-badge-language {
                display: none;
            }

			.python-tutor-link {
				font-size: smaller;
			}

			.python-tutor-link:before {
				content: "";
				display: block;
				background: url("http://pythontutor.com/favicon.ico") no-repeat;
				width: 48px;
				height: 48px;
				float: left;
				margin: 0 6px 0 0;
			}

			.reveal h3 {
				margin-bottom: 40px;
			}

            .smaller {
                font-size: smaller;
            }

            code {
                padding: 2px 4px;
                font-size: 90%;
                color: #0072c1;
                background-color: #f9f2f4;
                border-radius: 4px;
            }

            p.padded {
                margin-top: 32px;
            }

            section .row {
                display: flex;
            }

            section .column {
                flex: 48%;
                margin: 10px;
            }

			@media print
			{
				.no-print, .no-print *
				{
					display: none !important;
				}
			}


            .regex-input {
                border:1px solid rgb(204, 204, 204);
                background: rgb(245, 245, 245);
                padding: 8px;
            }

            .regex-input input {
                font-size: inherit;
            }

            .regex-input input[type=text]:valid {
                background-color: rgb(192, 255, 216);
            }

            .regex-input input[type=text]:invalid {
                background-color: pink;
            }

		</style>
        <style>
            .env-diagram {
                position: relative;
                font-family: monospace;
                font-size: 18px;
            }
            .env-diagram-frame table.table {
                margin: 0px;
            }
            .env-diagram .env-diagram-frame, .env-diagram .env-diagram-objects {
                width: 310px;
                border-left: 1px solid #aaa;
                margin-bottom: 15px;
                padding: 8px;
            }
            .env-diagram .env-diagram-frame.current {
                background: #e2ebf6;
            }
            .env-diagram .env-diagram-frame td, .env-diagram .env-diagram-objects td {
                font-size: smaller;
            }
            .env-diagram .env-diagram-connector {
                color: #005583;
            }
            .env-diagram .env-diagram-objects {
                float: right;
            }
            .env-diagram .env-diagram-objects ul {
                list-style: none;
                padding: 0;
                margin: 0;
            }
            .env-diagram .env-diagram-objects td {
                width: 230px;
            }
            .env-diagram .env-diagram-objects .env-diagram-connector {
                margin-right: 8px;
            }
            .env-diagram .env-diagram-objects .env-diagram-trash {
                padding-top: 6px;
                margin-top: 12px;
            }
            .env-diagram .env-diagram-frame > div {
                margin-bottom: 10px;
            }
            .env-diagram .env-diagram-frame > div input {
                width: 90px;
            }
            .env-diagram .env-diagram-frame > div input:first-of-type {
                margin-right: 8px;
            }
            .env-diagram .env-diagram-frame table {
                margin-bottom: 0px;
            }
            .env-diagram .env-diagram-frame table input {
                width: 100px;
            }
            .env-diagram .env-diagram-frame table tbody td {
                padding: 2px;
                padding-right: 6px;
                height: 24px;
            }
            .env-diagram .env-diagram-frame table tbody td:first-child {
                text-align: right;
                width: 105px;
            }
            .env-diagram .env-diagram-frame table tbody td:nth-child(2) {
                width: 60px;
                border-left: 1px solid black;
                border-bottom: 1px solid black;
            }
            .env-diagram .env-diagram-frame .env-diagram-connector {
                margin-left: 12px;
            }
            .numbered-code ol {
                line-height: 1.7em;
                font-size: 1.0em;
                margin: 20px auto;
                width: 100%;
            }
            .numbered-code li {
                position: relative;
            }
            .numbered-code .line-arrow {
                position: absolute;
                right: 8px;
                bottom: 0px;
                font-size: 0.7em;
            }
            .numbered-code .line-current {
                color: blue;
            } 
            .numbered-code .line-previous {
                color: rgb(171, 171, 202);
            } 
        </style>
        <style>
        .circle-marker {
            position: absolute;
            background: blue;
            color: white;
            font-size: 20px;
            border-radius: 30px;
            width: 30px;
            height: 30px;
            text-align: center;
        }
        .circle-marker-arc {
            position: absolute;
            width: 60px;
            height: 90px;
            background: transparent;
            border-radius: 100px;
            border-left: 1px solid blue;
        }
        </style>
        <style>
        .bordered {
            border: 1px dashed blue;
            border-radius: 8px;
            padding: 6px;
            --balloon-font-size: 20px;
        }
        </style>
        <style>
    
    #insertion-demo {
                height: 200px;
            }
            .array-address, .array-index, .array-value {
                background: #ffffc6;
                text-align: center;
                border: 1px solid #888;
                position: absolute;
                width: 100px;
                height: 50px;
                transition: 1s;
            }

            .array-address {
                background: #c6f2ff;
            }

            .array-addresses, .array-indices, .array-values {
                margin-bottom: 8px;
            }

            .array-insert-form input, .array-insert-form button, .linkedlist-insert-form input, .linkedlist-insert-form button {
                font-size: 32px;
                width: 120px;
            }

            .linkedlist-visualization {
                height: 120px;
                position: relative;
            }

            .linkedlist-link {
                position: absolute;
                top: 0px;
                left: 0px;
                width:80px;
                border: 1px solid #888;
                font-size: 0.5em;
                text-align: center;
            }
            .linkedlist-parts {
                background-color: #ffffc6;
                display: flex;
            }
            .linkedlist-value {
                display:inline-block;
                width: 40px;
                border-right: 1px solid #888;
            }
            .linkedlist-pointer {
                display:inline-block;
                width: 40px;
            }
            .linkedlist-address {
                width:100%;
                background: #c6f2ff;
                border-top: 1px solid #888;
            }
        </style>
        <style>
        .node, .edge, .node text {
            visibility: hidden;
        }
        .node.activated text:first-of-type {
            visibility: visible;
        }
        .node.activated path {
            visibility: visible;
        }
        .node text.activated {
            visibility: visible;
        }
        .edge.activated {
            visibility: visible;
        }
        .svg-controls {
            width: 600px;
            display: grid;
            grid-template-rows: 1fr;
            grid-template-columns: 100px 1fr 100px;
            grid-gap: 8px;
            position: fixed;
            right: 0;
            top: 0;
            background: #80808070;
        }
        .svg-controls button:first-of-type {
            grid-row: 1;
            grid-column: 1;
        }
        .svg-controls input {
            grid-row: 1;
            grid-column: 2;
        }
        .svg-controls button:last-of-type {
            grid-row: 1;
            grid-column: 3;
        }
        </style>
	</head>
	<body>
		<div class="reveal">
			<div class="slides">

				<section class="heading-only" style="padding-top:5%">
                    <h1>Web Apps</h1>

					<div class="no-print" style="text-align: left; margin-top: 100px; font-size: 70%;">
						Tips for navigating the slides:
						<ul>
							<li>Press O or Escape for overview mode.</li>
							<li>Visit <a href="37-Web_Apps.html?print-pdf" target="_blank">this link</a> for a nice printable version</li>
							<li>Press the copy icon on the upper right of code blocks to copy the code</li>
						</ul>
                    </div>

                    <aside class="speaker-notes">
                    </aside>
				</section>


                <section>
                    <h3>Class outline:</h3>

                    <ul>
                        <li>How the web works
                        <li>Server-side Python
                        <li>CS61A projects
                    </ul>
                </section>

                <section class="heading-only">
                    <h2>How the web works</h2>
                </section>

                <section>
                    <h3>Clients and servers</h3>

                    <img src="images/client_server_HTTP.png" alt="Diagram of browser sending HTTP request to server and receiving HTTP response"/>
                </section>

                <section>
                    <h3 style="font-size:48px;">HTTP</h3>

                    <p>A client sends an HTTP request:</p>

                    <pre style="font-size:0.7em; margin-top: 0px;"><code data-trim data-noescape class="text">
                    GET /index.html HTTP/1.1
                    Host: www.example.com
                    </code></pre>

                    <p>The server sends back an HTTP response:</p>
                    <pre style="font-size:0.7em; margin-top: 0px;"><code data-trim data-noescape class="html">
                    HTTP/1.1 200 OK
                    Content-Type: text/html; charset=UTF-8
                    Content-Length: 208
                    &lt;!DOCTYPE html&gt;
                      &lt;html&gt;
                        &lt;head&gt;
                          &lt;title&gt;Example Domain&lt;/title&gt;
                        &lt;/head&gt;
                      &lt;body&gt;
                        &lt;h1&gt;Example Domain&lt;/h1&gt;
                        &lt;p&gt;This domain is to be used for illustrative examples in documents.&lt;/p&gt;
                      &lt;/body&gt;
                    &lt;/html&gt;
                    </code></pre>
                </section>

                <section>
                    <h3>Webpages</h3>

                    <p>Webpages are made up of three languages:</p>

                    <ul>
                        <li><strong>HTML</strong>: Contains the content and uses tags to 
                            break it into semantic chunks (headings, paragraphs, etc)</li>
                        <li><strong>CSS</strong>: Contains style rules that apply
                            properties to elements on a page.</li>
                        <li><strong>JavaScript</strong>: Contains code that dynamically
                            accesses and updates the page content to make it more interactive.</li>
                    </ul>
                </section>

                <section>
                    <h3>What does a server do?</h3>

                    <p>The most basic server just serves up HTML and multimedia files
                        from a file system.
                    </p>

                    <p>Server-side code is also useful for anything that requires access
                        to persistent data or needs an additional layer of security than
                        allowed in the client.</p>
                    
                    <ul>
                        <li>User authentication
                        <li>Database fetches/updates
                        <li>Caching
                    </ul>
                </section>

                <section class="heading-only">
                    <h2>Server-side Python</h2>
                </section>

                <section>
                    <h3>Simple HTTP server</h3>

                    <p>From the standard library, <a target="_blank" href="https://docs.python.org/3/library/http.server.html">the http module</a>
                        can run a basic server. But it is <strong>not</strong> recommended for production.</p>

                    <p>Running a simple file server:</p>

                    <pre style="font-size:0.8em; margin-top: 0px;"><code data-trim data-noescape class="shell">
                    python -m http.server 8000
                    </code></pre>
                </section>

                <section>
                    <h3>Demo: Simple dynamic pages</h3>

                    <p>Using the http module to dynamically generate responses.</p>

                    <p>
                        <a href="https://simpleserverexample.pamelafox2.repl.co/path" target="_blank">simpleserverexample.pamelafox2.repl.co/path</a>
                    </p>

                    <p>
                        View the code by clicking the "Code" tab at
                        <A href="https://replit.com/@PamelaFox2/SimpleServerExample" target="_blank">https://replit.com/@PamelaFox2/SimpleServerExample</a>
                    </p>

                    <p>Based on <a href="https://gist.github.com/mdonkers/63e115cc0c79b4f6b8b3a6b797e485c7" target="_blank">this code</a>.</p>

                </section>

                <section>
                    <h3>Flask framework</h3>

                    <p>An external package, <a target="_blank" href="https://flask.palletsprojects.com/en/2.0.x/">Flask</a> is a lightweight framework
                        for server requests and responses.</p>

                    <p>Apps written in Flask:</p>
                    <ul>
                        <li>cs61a.org
                        <li>Khan Academy (originally)
                        <li>Reddit
                        <li>Netflix
                    </ul>
                </section>

                <section>
                    <h3>Demo: Simple Flask website</h3>

                    <p>Using the Flask framework to generate responses for each routes.</p>

                    <p>
                        <a href="https://simpleflaskexample.pamelafox2.repl.co/" target="_blank">simpleflaskexample.pamelafox2.repl.co/</a>
                    </p>

                    <p>
                        View the code by clicking the "Code" tab at
                        <A href="https://replit.com/@PamelaFox2/SimpleFlaskExample" target="_blank">https://replit.com/@PamelaFox2/SimpleFlaskExample</a>
                    </p>

                    <p>Based on <a href="https://nickymarino.com/2021/04/13/create-python-web-apps-with-flask-and-replit/" target="_blank">this tutorial</a>.</p>
                </section>

                <section>
                    <h3>Webapps with Databases</h3>

                    <p>Web apps store any data in databases that needs to be shared across multiple users/computers. </p>
                    
                    <img src="https://cs61a.org/assets/slides/images/webapp_database.jpg" alt="Diagram using SQL to update and query a database storing data for a web application"/>
                </section>


                <section>
                    <h3>Demo App: Native or Not?</h3>

                    <p>
                        <a href="https://flaskdbexample-orm.pamelafox2.repl.co/" target="_blank">flaskdbexample-orm.pamelafox2.repl.co/</a>
                    </p>

                    <p>
                        View the code by clicking the "Code" tab at
                        <A href="https://replit.com/@PamelaFox2/FlaskDBExample-ORM" target="_blank">https://replit.com/@PamelaFox2/FlaskDBExample-ORM</a>
                    </p>

                </section>

                <section>
                    <h3>Demo App: 61A Merch</h3>

                    <p>
                        <a href="https://61amerch-orm.pamelafox2.repl.co/" target="_blank">61amerch-orm.pamelafox2.repl.co/</a>
                    </p>

                    <p>
                        View the code by clicking the "Code" tab at
                        <A href="https://replit.com/@PamelaFox2/61aMerch-ORM" target="_blank">https://replit.com/@PamelaFox2/61aMerch-ORM</a>
                    </p>

                </section>

                <section>
                    <h3>Django framework</h3>

                    <p>An external library, Django is a fairly heavyweight/opinionated 
                        framework for server-side code. Includes an ORM for database interaction.</p>
                    
                    <p>Apps written in Django:</p>
                    <ul>
                        <li>Coursera (originally, now Scala+Play)
                        <li>Instagram
                        <li>Pinterest (originally, now Flask)
                        <li>Eventbrite
                    </ul>
                </section>

                <section class="heading-only">
                    <h2>CS61A projects</h2>
                </section>

                <section>
                    <h3>Common files</h3>

                    <p>Hog and Cats both use the http module
                        to run a server and share common files
                        for setting up the server.
                    </p>

                    <a target="_blank" href="https://github.com/Cal-CS-61A-Staff/cs61a-apps/blob/master/gui_files/common_server.py">
                        common_server.py
                    </a>
                </section>

                <section>
                    <h3>Cats code</h3>

                    <p>The Cats code includes many routes
                        for handling multiplayer games,
                        since those require access to the database.
                    </p>

                    <a target="_blank" href="https://github.com/Cal-CS-61A-Staff/cs61a-apps/blob/master/cats/server/gui_files/multiplayer.py">
                    multiplayer.py
                    </a>
                </section>

                <section>
                    <h3>Hog code</h3>

                    <p>The Hog code includes routes for 
                        taking the next turn.
                        It does not store anything in a database,
                        the browser just remembers all the turns.
                    </p>

                    <a target="_blank" href="https://github.com/Cal-CS-61A-Staff/cs61a-apps/blob/master/hog/server/hog_gui.py">
                    hog_gui.py
                    </a>
                </section>

			</div>
		</div>


        <script src="https://cdn.jsdelivr.net/npm/reveal.js@4.1.0/dist/reveal.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/reveal.js@4.1.0/plugin/highlight/highlight.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/highlightjs-badge@0.1.9/highlightjs-badge.min.js"></script>
        <script>
            const srcUrlPrefix = "https://cdn.jsdelivr.net/npm/reveal.js@4.1.0/";
            Reveal.initialize({
                hash: true,
                center: false,
                slideNumber: true,
                showNotes: false,
                margin: 0.1,
                preloadIframes: true,
                plugins: [ RevealHighlight ],
                pdfSeparateFragments: true,
                transition: "none"
            });

            // add HighlightJS-badge (options are optional)
            var options = {
                copyIconContent: "📄",
                checkIconContent: "✅"
            };
            window.highlightJsBadge(options);

            if (window.location.search == "?print-pdf") {
                var uncounted = document.querySelectorAll("[data-visibility='uncounted']");
                uncounted.forEach(node => {
                    node.parentNode.classList.add("no-print")
                })
            }
        </script>
    </body>
</html>