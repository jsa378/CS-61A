
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta name="description" content ="CS 61A: Structure and Interpretation of Computer Programs" />
    <meta name="keywords" content ="Computer Science, Programming, Berkeley, EECS" />
    <meta name="author" content ="John DeNero, Jedi Tsang (Guest Lecturer), Shm Almeda (GSI)" />
    <!-- CHANGED CAREFUL -->
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="viewport" content="width=device-width">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-throttle-debounce/1.1/jquery.ba-throttle-debounce.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="/assets/js/hl.js"></script>
    <script src="/assets/js/toggledarkmode.js"></script>
    <script>
        // we aren't registering builtins since
        //      (1) they don't render differently in the current CSS from other names
        //      (2) it's a mess to list all of them. You can extract from the site but that takes effort
        // if (1) ceases to be true, (2) might be worth the effort. For now, we're leaving as is
        hljsRegister({
            'keyword': "define if cond and or let begin lambda mu quote delay cons-stream set! quasiquote unquote unquote-splicing define-macro"
        });
        hljs.initHighlightingOnLoad();
    </script>
    <script src="/assets/js/dark-mode.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inconsolata|Roboto:300,400,500|Work+Sans:400,700">
    <link rel="stylesheet" href="/assets/css/style.css">
    <link rel="stylesheet" href="/assets/css/mono-blue.css">
    <link rel="icon" href="/assets/images/favicon.ico">

    

<link rel="stylesheet" type="text/css" href="/assets/css/lab.css">


    <title>
Lab 4 Solutions | CS 61A Fall 2024
</title>
  </head>

  <body id="index" class="home">
    <nav class="navbar navbar-default navbar-static-top">
      <div class="container noselect">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse-section" aria-label="Toggle Navigation Bar">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/">
            CS 61A
            <!-- <img style="max-width:60px; margin-top: -20px;" class="logo" src="/assets/images/logo.png"/> -->
          </a>
        </div>

        <div class="collapse navbar-collapse" id="navbar-collapse-section">
          <ul class="nav navbar-nav navbar-right">

            
            <li><a href="/">Lectures</a></li>
            
            <li><a href="/articles/about-61a/">Syllabus</a></li>
            
            <li><a href="https://edstem.org/us/courses/63971/discussion/">Ed</a></li>
            
            <li><a href="/office-hours/">Office Hours</a></li>
            
            <li><a href="/articles/contact-61a/">Contact</a></li>
            

            
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Links
                <span class="caret"></span>
              </a>
              <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                
                <li><a href="https://go.cs61a.org/61a-extensions">Request an Extension</a></li>
                
                <li><a href="https://go.cs61a.org/61a-regrades">Request a Regrade</a></li>
                
                <li><a href="https://oh.cs61a.org/">Office Hours Queue</a></li>
                
                <li><a href="https://www.gradescope.com/courses/843175">Gradescope</a></li>
                
                <li><a href="https://bcourses.berkeley.edu/courses/1538118/pages">Lecture Recordings</a></li>
                
                <li><a href="https://pythontutor.com/cp/composingprograms.html">Python Tutor</a></li>
                
                <li><a href="https://code.cs61a.org/scheme/">Scheme Editor</a></li>
                
              </ul>
            </li>
            
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Resources
                <span class="caret"></span>
              </a>
              <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                
                <li><a href="/resources/">Past Exams & Websites</a></li>
                
                <li><a href="https://www.composingprograms.com">Textbook</a></li>
                
                <li><a href="https://drive.google.com/file/d/1O72u0ml65pibcjz-PXKpqeJDKaVqQ3D8/view">Debugging Guide</a></li>
                
                <li><a href="/articles/studying/">Studying Guide</a></li>
                
                <li><a href="/articles/composition/">Composition Guide</a></li>
                
                <li><a href="/articles/campus-res/">Campus Resources</a></li>
                
                <li><a href="/articles/advice/">Advice from Students</a></li>
                
              </ul>
            </li>
            
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Staff
                <span class="caret"></span>
              </a>
              <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                
                <li><a href="/instructor">Instructors</a></li>
                
                <li><a href="/staff">TAs & Tutors</a></li>
                
                <li><a href="/academic-interns">Academic Interns</a></li>
                
              </ul>
            </li>
            

          </ul>
        </div>
      </div>
    </nav>

    <main id="content" class="container">
      
<div class='row'>
  <div class='col-md-9'>
    <header>
      <h1>
        
Lab 4 Solutions

        
        
        <ul class="inline-block list-inline">
          <li><a href="lab04.zip" class="label label-outline">lab04.zip</a></li>
        </ul>
        
        
      </h1>
    </header>
    
<h2>Solution Files</h2>


    
<h1 id="required-questions">Required Questions</h1>


<br>

        <button id='toggle-1' class='btn btn-outline btn-lg alwaystoggle toggle'>
        Getting Started Videos<noscript> (enable JavaScript)</noscript>
        </button>
        <div class="solution toggle-1">


<h2 id="getting-started-videos" class="no-toc">Getting Started Videos</h2>


<p>These videos may provide some helpful direction for tackling the coding
problems on this assignment.</p>

<blockquote><p>To see these videos, you should be logged into your berkeley.edu email.</p></blockquote>


            <iframe width="560" height="315" src="https://youtube.com/embed/videoseries?list=PLx38hZJ5RLZfz72AjuXYb_t9XXkkFob-0"
                frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" aria-label = "lab4-getstarted"
                allowfullscreen></iframe><p><a href='https://youtu.be/playlist?list=PLx38hZJ5RLZfz72AjuXYb_t9XXkkFob-0'> YouTube link </a></p>
</div>


<h2 id="dictionaries">Dictionaries</h2>


<p>Consult the drop-down if you need a refresher on dictionaries. It's
okay to skip directly to the questions and refer back
here should you get stuck.</p>


        <button id='toggle-2' class='btn btn-outline btn-lg alwaystoggle toggle'>
        Dictionaries<noscript> (enable JavaScript)</noscript>
        </button>
        <div class="solution toggle-2">

<p>A dictionary contains key-value pairs and allows the values to be looked up by
their key using square brackets. Each key must be unique.</p>

<pre><code>&gt;&gt;&gt; d = {2: 4, &#x27;two&#x27;: [&#x27;four&#x27;], (1, 1): 4}
&gt;&gt;&gt; d[2]
4
&gt;&gt;&gt; d[&#x27;two&#x27;]
[&#x27;four&#x27;]
&gt;&gt;&gt; d[(1, 1)]
4</code></pre>

<p>The sequence of keys or values or key-value pairs can be accessed using
<code>.keys()</code> or <code>.values()</code> or <code>.items()</code>.</p>

<pre><code>&gt;&gt;&gt; for k in d.keys():
...     print(k)
...
2
two
(1, 1)
&gt;&gt;&gt; for v in d.values():
...     print(v)
...
4
[&#x27;four&#x27;]
4
&gt;&gt;&gt; for k, v in d.items():
...     print(k, v)
...
2 4
two [&#x27;four&#x27;]
(1, 1) 4</code></pre>

<p>You can check whether a dictionary contains a key using <code>in</code>:</p>

<pre><code>&gt;&gt;&gt; &#x27;two&#x27; in d
True
&gt;&gt;&gt; 4 in d
False</code></pre>

<p>A dictionary comprehension is an expression that evaluates to a new dictionary.</p>

<pre><code>&gt;&gt;&gt; {3*x: 3*x + 1 for x in range(2, 5)}
{6: 7, 9: 10, 12: 13}</code></pre>

</div>
<br>

<blockquote><p><strong>Important:</strong>
For all WWPD questions, type <code>Function</code> if you believe the answer is
<code>&lt;function...&gt;</code>, <code>Error</code> if it errors, and <code>Nothing</code> if nothing is displayed.</p>

<h3 id="q1-dictionaries">Q1: Dictionaries</h3>


<p>Use Ok to test your knowledge with the following "What Would Python Display?" questions:</p><pre style="margin-bottom:0;"><code class="nohighlight">python3 ok -q pokemon -u<button id="copy-code-python3ok-qpokemon-u" class="inline-copy-button"><div class="copy-tooltip"><span>Copy</span></div>✂️</a></code></pre>
        <script>
        document.getElementById("copy-code-python3ok-qpokemon-u").onclick = () => copyCode('python3 ok -q pokemon -u', "copy-code-python3ok-qpokemon-u");
        </script>
        <br/></blockquote>

<pre><code>&gt;&gt;&gt; pokemon = {&#x27;pikachu&#x27;: 25, &#x27;dragonair&#x27;: 148, &#x27;mew&#x27;: 151}
&gt;&gt;&gt; pokemon[&#x27;pikachu&#x27;]
<div class="alt prompt-1">______</div><div class="solution prompt-1">&#x32;&#x35;</div>
&gt;&gt;&gt; len(pokemon)
<div class="alt prompt-1">______</div><div class="solution prompt-1">&#x33;</div>
&gt;&gt;&gt; &#x27;mewtwo&#x27; in pokemon
<div class="alt prompt-1">______</div><div class="solution prompt-1">&#x46;&#x61;&#x6c;&#x73;&#x65;</div>
&gt;&gt;&gt; &#x27;pikachu&#x27; in pokemon
<div class="alt prompt-1">______</div><div class="solution prompt-1">&#x54;&#x72;&#x75;&#x65;</div>
&gt;&gt;&gt; 25 in pokemon
<div class="alt prompt-1">______</div><div class="solution prompt-1">&#x46;&#x61;&#x6c;&#x73;&#x65;</div>
&gt;&gt;&gt; 148 in pokemon.values()
<div class="alt prompt-1">______</div><div class="solution prompt-1">&#x54;&#x72;&#x75;&#x65;</div>
&gt;&gt;&gt; 151 in pokemon.keys()
<div class="alt prompt-1">______</div><div class="solution prompt-1">&#x46;&#x61;&#x6c;&#x73;&#x65;</div>
&gt;&gt;&gt; &#x27;mew&#x27; in pokemon.keys()
<div class="alt prompt-1">______</div><div class="solution prompt-1">&#x54;&#x72;&#x75;&#x65;</div></code></pre>
        <button id='prompt-1' class='btn btn-outline btn-lg solutiontoggle prompt'>
        Toggle Solution<noscript> (enable JavaScript)</noscript>
        </button>
        


<h3 id="q2-divide">Q2: Divide</h3>


<p>Implement <code>divide</code>, which takes two lists of positive integers <code>quotients</code> and
<code>divisors</code>. It returns a dictionary whose keys are the elements of <code>quotients</code>.
For each key <code>q</code>, its corresponding value is a list of all the elements of
<code>divisors</code> that can be evenly divided by <code>q</code>.</p>

<blockquote><p>Hint: The value for each key needs be a list, so list comprehension might be useful here.</p></blockquote>

<solution>

<pre><code>def divide(quotients, divisors):
    &quot;&quot;&quot;Return a dictonary in which each quotient q is a key for the list of
    divisors that it divides evenly.

    &gt;&gt;&gt; divide([3, 4, 5], [8, 9, 10, 11, 12])
    {3: [9, 12], 4: [8, 12], 5: [10]}
    &gt;&gt;&gt; divide(range(1, 5), range(20, 25))
    {1: [20, 21, 22, 23, 24], 2: [20, 22, 24], 3: [21, 24], 4: [20, 24]}
    &quot;&quot;&quot;
<div class="sol-highlight">    return {q: [d for d in divisors if d % q == 0] for q in quotients}</div></code></pre>

</solution>

<p>Use Ok to test your code:</p><pre style="margin-bottom:0;"><code class="nohighlight">python3 ok -q divide<button id="copy-code-python3ok-qdivide" class="inline-copy-button"><div class="copy-tooltip"><span>Copy</span></div>✂️</a></code></pre>
        <script>
        document.getElementById("copy-code-python3ok-qdivide").onclick = () => copyCode('python3 ok -q divide', "copy-code-python3ok-qdivide");
        </script>
        <br/>


<h3 id="q3-buying-fruit">Q3: Buying Fruit</h3>


<p>Implement the <code>buy</code> function that takes three parameters:</p>

<ol>
  <li><code>fruits_to_buy</code>: A list of strings representing the fruits you need to buy. <em>At least one of each fruit must be bought.</em></li>
  <li><code>prices</code>: A dictionary where the keys are fruit names (strings) and the values are positive integers representing the cost of each fruit.</li>
  <li><code>total_amount</code>: An integer representing the total money available for purchasing the fruits.
  Take a look at the docstring for more details on the input structure.</li>
</ol>

<p>The function should print <strong>all possible ways</strong> to buy the required fruits so that the combined cost equals <code>total_amount</code>. You can only select fruits mentioned in <code>fruits_to_buy</code> list.</p>

<blockquote><p><strong>Note</strong>: You can use the <code>display</code> function to format the output. Call <code>display(fruit, count)</code> for each fruit and its corresponding quantity to generate a string showing the type and amount of fruit bought.</p></blockquote>

<!-- break line -->

<blockquote><p><strong>Hint</strong>: How can you ensure that every combination includes at least one of each fruit listed in <code>fruits_to_buy</code>?</p></blockquote>

<solution>

<pre><code>def buy(fruits_to_buy, prices, total_amount):
    &quot;&quot;&quot;Print ways to buy some of each fruit so that the sum of prices is amount.

    &gt;&gt;&gt; prices = {&#x27;oranges&#x27;: 4, &#x27;apples&#x27;: 3, &#x27;bananas&#x27;: 2, &#x27;kiwis&#x27;: 9}
    &gt;&gt;&gt; buy([&#x27;apples&#x27;, &#x27;oranges&#x27;, &#x27;bananas&#x27;], prices, 12)  # We can only buy apple, orange, and banana, but not kiwi
    [2 apples][1 orange][1 banana]
    &gt;&gt;&gt; buy([&#x27;apples&#x27;, &#x27;oranges&#x27;, &#x27;bananas&#x27;], prices, 16)
    [2 apples][1 orange][3 bananas]
    [2 apples][2 oranges][1 banana]
    &gt;&gt;&gt; buy([&#x27;apples&#x27;, &#x27;kiwis&#x27;], prices, 36)
    [3 apples][3 kiwis]
    [6 apples][2 kiwis]
    [9 apples][1 kiwi]
    &quot;&quot;&quot;
    def add(fruits, amount, cart):
        if fruits == [] and amount == 0:
            print(cart)
        elif fruits and amount &gt; 0:
            fruit = fruits[0]
<div class="sol-highlight">            price = prices[fruit]</div><div class="sol-highlight">            for k in range(1, amount // price + 1):</div>                # Hint: The display function will help you add fruit to the cart.
<div class="sol-highlight">                add(fruits[1:], amount &#x2d; price * k, cart + display(fruit, k))</div>    add(fruits_to_buy, total_amount, &#x27;&#x27;)

def display(fruit, count):
    &quot;&quot;&quot;Display a count of a fruit in square brackets.

    &gt;&gt;&gt; display(&#x27;apples&#x27;, 3)
    &#x27;[3 apples]&#x27;
    &gt;&gt;&gt; display(&#x27;apples&#x27;, 1)
    &#x27;[1 apple]&#x27;
    &gt;&gt;&gt; print(display(&#x27;apples&#x27;, 3) + display(&#x27;kiwis&#x27;, 3))
    [3 apples][3 kiwis]
    &quot;&quot;&quot;
    assert count &gt;= 1 and fruit[&#x2d;1] == &#x27;s&#x27;
    if count == 1:
        fruit = fruit[:&#x2d;1]  # get rid of the plural s
    return &#x27;[&#x27; + str(count) + &#x27; &#x27; + fruit + &#x27;]&#x27;</code></pre>

</solution>

<p>Use Ok to test your code:</p><pre style="margin-bottom:0;"><code class="nohighlight">python3 ok -q buy<button id="copy-code-python3ok-qbuy" class="inline-copy-button"><div class="copy-tooltip"><span>Copy</span></div>✂️</a></code></pre>
        <script>
        document.getElementById("copy-code-python3ok-qbuy").onclick = () => copyCode('python3 ok -q buy', "copy-code-python3ok-qbuy");
        </script>
        <br/>


<h2 id="data-abstraction">Data Abstraction</h2>


<p>Consult the drop-down if you need a refresher on data abstraction. It's
okay to skip directly to the questions and refer back
here should you get stuck.</p>


        <button id='toggle-3' class='btn btn-outline btn-lg alwaystoggle toggle'>
        Data Abstraction<noscript> (enable JavaScript)</noscript>
        </button>
        <div class="solution toggle-3">

<p>A <em>data abstraction</em> is a set of functions that compose and decompose compound
values. One function called the <em>constructor</em> puts together two or more parts
into a whole (such as a rational number; also known as a fraction), and other
functions called <em>selectors</em> return parts of that whole (such as the numerator
or denominator).</p>

<pre><code>def rational(n, d):
    &quot;Return a fraction n / d for integers n and d.&quot;

def numer(r):
    &quot;Return the numerator of rational number r.&quot;

def denom(r):
    &quot;Return the denominator of rational number r.&quot;</code></pre>

<p>Crucially, one can use a data abstraction without knowing how these functions are
implemented. For example, we (humans) can verify that <code>mul_rationals</code> is
implemented correctly just by knowing what <code>rational</code>, <code>numer</code>, and <code>denom</code> do
without knowing how they are implemented.</p>

<pre><code>def mul_rationals(r1, r2):
    &quot;Return the rational number r1 * r2.&quot;
    return rational(numer(r1) * numer(r2), denom(r1) * denom(r2))</code></pre>

<p>However, for Python to run the program, the data abstraction requires an
implementation. Using knowledge of the implementation crosses the abstraction barrier, which separates the part of a program that depends on the
implementation of the data abstraction from the part that does not. A
well-written program typically will minimize the amount of code that depends on
the implementation so that the implementation can be changed later on without
requiring much code to be rewritten.</p>

<p>When using a data abstraction that has been provided, write your program so that
it will still be correct even if the implementation of the data abstraction
changes.</p>

</div>


<h3 id="cities">Cities</h3>


<p>Say we have a data abstraction for cities. A city has a name, a latitude
coordinate, and a longitude coordinate.</p>

<p>Our data abstraction has one <strong>constructor</strong>:</p>

<ul>
  <li><code>make_city(name, lat, lon)</code>: Creates a city object with the given name,
  latitude, and longitude.</li>
</ul>

<p>We also have the following <strong>selectors</strong> in order to get the information for
each city:</p>

<ul>
  <li><code>get_name(city)</code>: Returns the city's name</li>
  <li><code>get_lat(city)</code>: Returns the city's latitude</li>
  <li><code>get_lon(city)</code>: Returns the city's longitude</li>
</ul>

<p>Here is how we would use the constructor and selectors to create cities and
extract their information:</p>

<pre><code>&gt;&gt;&gt; berkeley = make_city(&#x27;Berkeley&#x27;, 122, 37)
&gt;&gt;&gt; get_name(berkeley)
&#x27;Berkeley&#x27;
&gt;&gt;&gt; get_lat(berkeley)
122
&gt;&gt;&gt; new_york = make_city(&#x27;New York City&#x27;, 74, 40)
&gt;&gt;&gt; get_lon(new_york)
40</code></pre>

<p>All of the selector and constructor functions can be found in the lab file if
you are curious to see how they are implemented. However, the point of data
abstraction is that, when writing a program about cities, we do not need to know
the implementation.</p>


<h3 id="q4-distance">Q4: Distance</h3>


<p>We will now implement the function <code>distance</code>, which computes the
distance between two city objects. Recall that the distance between two
coordinate pairs <code>(x1, y1)</code> and <code>(x2, y2)</code> can be found by calculating
the <code>sqrt</code> of <code>(x1 &#x2d; x2)**2 + (y1 &#x2d; y2)**2</code>. We have already imported
<code>sqrt</code> for your convenience. Use the latitude and longitude of a city as
its coordinates; you'll need to use the selectors to access this info!</p>

<solution>

<pre><code>from math import sqrt
def distance(city_a, city_b):
    &quot;&quot;&quot;
    &gt;&gt;&gt; city_a = make_city(&#x27;city_a&#x27;, 0, 1)
    &gt;&gt;&gt; city_b = make_city(&#x27;city_b&#x27;, 0, 2)
    &gt;&gt;&gt; distance(city_a, city_b)
    1.0
    &gt;&gt;&gt; city_c = make_city(&#x27;city_c&#x27;, 6.5, 12)
    &gt;&gt;&gt; city_d = make_city(&#x27;city_d&#x27;, 2.5, 15)
    &gt;&gt;&gt; distance(city_c, city_d)
    5.0
    &quot;&quot;&quot;
<div class="sol-highlight">    lat_1, lon_1 = get_lat(city_a), get_lon(city_a)
    lat_2, lon_2 = get_lat(city_b), get_lon(city_b)
    return sqrt((lat_1 &#x2d; lat_2)**2 + (lon_1 &#x2d; lon_2)**2)</div></code></pre>

</solution>

<p>Use Ok to test your code:</p><pre style="margin-bottom:0;"><code class="nohighlight">python3 ok -q distance<button id="copy-code-python3ok-qdistance" class="inline-copy-button"><div class="copy-tooltip"><span>Copy</span></div>✂️</a></code></pre>
        <script>
        document.getElementById("copy-code-python3ok-qdistance").onclick = () => copyCode('python3 ok -q distance', "copy-code-python3ok-qdistance");
        </script>
        <br/>


<h3 id="q5-closer-city">Q5: Closer City</h3>


<p>Next, implement <code>closer_city</code>, a function that takes a latitude,
longitude, and two cities, and returns the <em>name</em> of the city that is
closer to the provided latitude and longitude.</p>

<p>You may only use the selectors <code>get_name</code> <code>get_lat</code> <code>get_lon</code>, constructors <code>make_city</code>, and the
<code>distance</code> function you just defined for this question.</p>

<blockquote><p><strong>Hint</strong>: How can you use your <code>distance</code> function to find the distance between
the given location and each of the given cities?</p></blockquote>

<solution>

<pre><code>def closer_city(lat, lon, city_a, city_b):
    &quot;&quot;&quot;
    Returns the name of either city_a or city_b, whichever is closest to
    coordinate (lat, lon). If the two cities are the same distance away
    from the coordinate, consider city_b to be the closer city.

    &gt;&gt;&gt; berkeley = make_city(&#x27;Berkeley&#x27;, 37.87, 112.26)
    &gt;&gt;&gt; stanford = make_city(&#x27;Stanford&#x27;, 34.05, 118.25)
    &gt;&gt;&gt; closer_city(38.33, 121.44, berkeley, stanford)
    &#x27;Stanford&#x27;
    &gt;&gt;&gt; bucharest = make_city(&#x27;Bucharest&#x27;, 44.43, 26.10)
    &gt;&gt;&gt; vienna = make_city(&#x27;Vienna&#x27;, 48.20, 16.37)
    &gt;&gt;&gt; closer_city(41.29, 174.78, bucharest, vienna)
    &#x27;Bucharest&#x27;
    &quot;&quot;&quot;
<div class="sol-highlight">    new_city = make_city(&#x27;arb&#x27;, lat, lon)
    dist1 = distance(city_a, new_city)
    dist2 = distance(city_b, new_city)
    if dist1 &lt; dist2:
         return get_name(city_a)
    return get_name(city_b)</div></code></pre>

</solution>

<p>Use Ok to test your code:</p><pre style="margin-bottom:0;"><code class="nohighlight">python3 ok -q closer_city<button id="copy-code-python3ok-qcloser_city" class="inline-copy-button"><div class="copy-tooltip"><span>Copy</span></div>✂️</a></code></pre>
        <script>
        document.getElementById("copy-code-python3ok-qcloser_city").onclick = () => copyCode('python3 ok -q closer_city', "copy-code-python3ok-qcloser_city");
        </script>
        <br/>


<h3 id="q6-don-t-violate-the-abstraction-barrier">Q6: Don't violate the abstraction barrier!</h3>


<blockquote><p>Note:
this question has no code-writing component
(if you implemented the previous two questions correctly).</p></blockquote>

<p>When writing functions that use a data abstraction, we should use the
constructor(s) and selector(s) whenever possible instead of assuming the
data abstraction's implementation.
Relying on a data abstraction's underlying implementation is known as
<em>violating the abstraction barrier</em>.</p>

<p>It's possible that you passed the doctests for the previous questions
even if you violated the abstraction barrier. To check whether or not you
did so, run the following command:</p>

<p>Use Ok to test your code:</p><pre style="margin-bottom:0;"><code class="nohighlight">python3 ok -q check_city_abstraction<button id="copy-code-python3ok-qcheck_city_abstraction" class="inline-copy-button"><div class="copy-tooltip"><span>Copy</span></div>✂️</a></code></pre>
        <script>
        document.getElementById("copy-code-python3ok-qcheck_city_abstraction").onclick = () => copyCode('python3 ok -q check_city_abstraction', "copy-code-python3ok-qcheck_city_abstraction");
        </script>
        <br/>

<p>The <code>check_city_abstraction</code> function exists only for the doctest, which swaps
out the implementations of the original abstraction with something else, runs
the tests from the previous two parts, then restores the original abstraction.</p>

<p>The nature of the abstraction barrier guarantees that changing the
implementation of an data abstraction shouldn't affect the functionality of
any programs that use that data abstraction, as long as the constructors and
selectors were used properly.</p>

<p>If you passed the Ok tests for the previous questions but not this one,
the fix is simple! Just replace any code that violates the abstraction
barrier with the appropriate constructor or selector.</p>

<p>Make sure that your functions pass the tests with both the first and the
second implementations of the data abstraction and that you understand why
they should work for both before moving on.</p>


<h2 id="check-your-score-locally">Check Your Score Locally</h2>

<p>You can locally check your score on each question of this assignment by running</p>

<pre><code>python3 ok &#x2d;&#x2d;score</code></pre>

<p><strong>This does NOT submit the assignment!</strong> When you are satisfied with your score, submit the assignment to Gradescope to receive credit for it.</p>


<h1 id="submit-assignment">Submit Assignment</h1>


<p>If you are in a regular section of CS 61A, fill out this <a href="https://forms.gle/dHxj8gttNWRY6Ptm9">lab attendance and feedback form</a>. (If you are in the mega section, you don't need to fill out the form.)</p>

<p>Then, submit this assignment by uploading any files you've edited <strong>to the appropriate Gradescope assignment.</strong> <a href="../lab00/#submit-with-gradescope">Lab 00</a> has detailed instructions.</p>

  </div>

  <div class='col-md-3 sticky'>
    <nav class='hidden-print hidden-sm hidden-xs sidebar'>
      <ul>
  <li><a href="#required-questions">Required Questions</a></li>
  <ul>
    <li><a href="#dictionaries">Dictionaries</a></li>
    <ul>
      <li><a href="#q1-dictionaries">Q1: Dictionaries</a></li>
      <li><a href="#q2-divide">Q2: Divide</a></li>
      <li><a href="#q3-buying-fruit">Q3: Buying Fruit</a></li>
    </ul>
    <li><a href="#data-abstraction">Data Abstraction</a></li>
    <ul>
      <li><a href="#cities">Cities</a></li>
      <li><a href="#q4-distance">Q4: Distance</a></li>
      <li><a href="#q5-closer-city">Q5: Closer City</a></li>
      <li><a href="#q6-don-t-violate-the-abstraction-barrier">Q6: Don't violate the abstraction barrier!</a></li>
    </ul>
    <li><a href="#check-your-score-locally">Check Your Score Locally</a></li>
  </ul>
  <li><a href="#submit-assignment">Submit Assignment</a></li>
</ul>
    </nav>
  </div>
</div>

    </main>

    <!-- <footer class="container">
      <div class="row text-center">
        <div class="col col-sm-4">
          <h3><a href="/">CS 61A</a></h3>
          <ul class="nav nav-pills nav-stacked">
            <li><a href="/weekly">Weekly Schedule</a></li>
            <li><a href="/office-hours">Office Hours</a></li>
            <li><a href="/staff">Staff</a></li>
          </ul>
        </div>
        <div class="col col-sm-4">
          <h3><a href="/resources">Resources</a></h3>
          <ul class="nav nav-pills nav-stacked">
            <li><a href="/articles/studying">Studying Guide</a></li>
            <li><a href="/articles/debugging">Debugging Guide</a></li>
            <li><a href="/articles/composition">Composition Guide</a></li>
            <li><a href="/articles/pair-programming">Pair Programming</a></li>
          </ul>
        </div>
        <div class="col col-sm-4">
          <h3><a href="/articles/about">Policies</a></h3>
          <ul class="nav nav-pills nav-stacked">
            <li><a href="/articles/about#assignments">Assignments</a></li>
            <li><a href="/articles/about#exams">Exams</a></li>
            <li><a href="/articles/about#grading">Grading</a></li>
          </ul>
        </div>
      </div>
    </footer> -->

    

    <script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.20.0/min/vs/loader.min.js"></script>
  <link rel="stylesheet" data-name="vs/editor/editor.main" href="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.20.0/min/vs/editor/editor.main.min.css">
  <script>
      require.config({ paths: { 'vs': 'https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.20.0/min/vs' }});
      window.MonacoEnvironment = { getWorkerUrl: () => URL.createObjectURL(new Blob([`
      self.MonacoEnvironment = {
          baseUrl: 'https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.20.0/min'
      };
      importScripts('https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.20.0/min/vs/base/worker/workerMain.min.js');
  `], { type: 'text/javascript' }))
  };
  </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jsPlumb/2.15.5/js/jsplumb.min.js"></script>
    <script src="/assets/js/network_storage.js"></script>
    <script src="/assets/js/code_tabindex.js"></script>
    <script src="/assets/js/storable.js"></script>
    <script src="/assets/js/editor.js"></script>
    <script src="/assets/js/copy-button.js"></script>
    <script src="/assets/js/env-diagram.js"></script>
    
<!-- <script src="/assets/js/sketchy.js"></script> -->
<script>
  $('.sidebar ul').addClass('nav nav-stacked noselect');
  $('body').scrollspy({
    target: '.sidebar',
    offset: 40
  });

  function goToId(id) {
    var target = $(id);
    target.parent().show();
    $('html,body').animate({
      scrollTop: target.offset().top,
    }, 100);
    $("body").scrollspy('refresh');
  }

  if (location.hash) {
    setTimeout(function() {
      if (location.hash) {
        goToId(location.hash);
      }
    }, 1);
  }

  $("a").click(function(event) {
    var urlBeforeHashRegEx = new RegExp("^"+window.location.href.split("#")[0]);
    if (/^#/.test(this.hash) && urlBeforeHashRegEx.test(this.href)) {
      event.preventDefault();
      goToId(this.hash);
      document.location.hash = this.hash;
    }
  });
</script>

  </body>
</html>