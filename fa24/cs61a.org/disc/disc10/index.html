
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta name="description" content ="CS 61A: Structure and Interpretation of Computer Programs" />
    <meta name="keywords" content ="Computer Science, Programming, Berkeley, EECS" />
    <meta name="author" content ="John DeNero, Jedi Tsang (Guest Lecturer), Shm Almeda (GSI)" />
    <!-- CHANGED CAREFUL -->
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="viewport" content="width=device-width">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-throttle-debounce/1.1/jquery.ba-throttle-debounce.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="/assets/js/hl.js"></script>
    <script src="/assets/js/toggledarkmode.js"></script>
    <script>
        // we aren't registering builtins since
        //      (1) they don't render differently in the current CSS from other names
        //      (2) it's a mess to list all of them. You can extract from the site but that takes effort
        // if (1) ceases to be true, (2) might be worth the effort. For now, we're leaving as is
        hljsRegister({
            'keyword': "define if cond and or let begin lambda mu quote delay cons-stream set! quasiquote unquote unquote-splicing define-macro"
        });
        hljs.initHighlightingOnLoad();
    </script>
    <script src="/assets/js/dark-mode.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inconsolata|Roboto:300,400,500|Work+Sans:400,700">
    <link rel="stylesheet" href="/assets/css/style.css">
    <link rel="stylesheet" href="/assets/css/mono-blue.css">
    <link rel="icon" href="/assets/images/favicon.ico">

    

<link rel="stylesheet" type="text/css" href="/assets/css/disc.css">


    <title>
Discussion 10 | CS 61A Fall 2024
</title>
  </head>

  <body id="index" class="home">
    <nav class="navbar navbar-default navbar-static-top">
      <div class="container noselect">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse-section" aria-label="Toggle Navigation Bar">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/">
            CS 61A
            <!-- <img style="max-width:60px; margin-top: -20px;" class="logo" src="/assets/images/logo.png"/> -->
          </a>
        </div>

        <div class="collapse navbar-collapse" id="navbar-collapse-section">
          <ul class="nav navbar-nav navbar-right">

            
            <li><a href="/">Lectures</a></li>
            
            <li><a href="/articles/about-61a/">Syllabus</a></li>
            
            <li><a href="https://edstem.org/us/courses/63971/discussion/">Ed</a></li>
            
            <li><a href="/office-hours/">Office Hours</a></li>
            
            <li><a href="/articles/contact-61a/">Contact</a></li>
            

            
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Links
                <span class="caret"></span>
              </a>
              <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                
                <li><a href="https://go.cs61a.org/61a-extensions">Request an Extension</a></li>
                
                <li><a href="https://go.cs61a.org/61a-regrades">Request a Regrade</a></li>
                
                <li><a href="https://oh.cs61a.org/">Office Hours Queue</a></li>
                
                <li><a href="https://www.gradescope.com/courses/843175">Gradescope</a></li>
                
                <li><a href="https://bcourses.berkeley.edu/courses/1538118/pages">Lecture Recordings</a></li>
                
                <li><a href="https://pythontutor.com/cp/composingprograms.html">Python Tutor</a></li>
                
                <li><a href="https://code.cs61a.org/scheme/">Scheme Editor</a></li>
                
              </ul>
            </li>
            
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Resources
                <span class="caret"></span>
              </a>
              <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                
                <li><a href="/resources/">Past Exams & Websites</a></li>
                
                <li><a href="https://www.composingprograms.com">Textbook</a></li>
                
                <li><a href="https://drive.google.com/file/d/1O72u0ml65pibcjz-PXKpqeJDKaVqQ3D8/view">Debugging Guide</a></li>
                
                <li><a href="/articles/studying/">Studying Guide</a></li>
                
                <li><a href="/articles/composition/">Composition Guide</a></li>
                
                <li><a href="/articles/campus-res/">Campus Resources</a></li>
                
                <li><a href="/articles/advice/">Advice from Students</a></li>
                
              </ul>
            </li>
            
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Staff
                <span class="caret"></span>
              </a>
              <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                
                <li><a href="/instructor">Instructors</a></li>
                
                <li><a href="/staff">TAs & Tutors</a></li>
                
                <li><a href="/academic-interns">Academic Interns</a></li>
                
              </ul>
            </li>
            

          </ul>
        </div>
      </div>
    </nav>

    <main id="content" class="container">
      
<div class='row'>
  <div class='col-md-9'>
    <header>
      <h1>
        
Discussion 10: Interpreters

        
        
        <ul class="inline-block list-inline">
          <li><a href="disc10.pdf" class="label label-outline">disc10.pdf</a></li>
        </ul>
        
        
      </h1>
    </header>
    

<!-- <div class="alert storable-login-status"></div> -->


    
<p>Switch to Pensieve:</p>

<ul>
  <li><strong>Everyone</strong>: Go to <a href="https://tutor.pensieve.co/schools/berkeley/all/cs61a/cs61a_fa24/05a40957-0787-4bd7-b905-47904d6ac42b/open">pensieve.co</a>, log in with your @berkeley.edu email, and <strong>enter your group number</strong> (which was in the email that assigned you to this lab).</li>
</ul>

<p>Once you're on Pensieve, you don't need to return to this page; Pensieve has all the same content (but more features). If for some reason Penseive doesn't work, return to this page and continue with the discussion.</p>


<h1 id="getting-started">Getting Started</h1>


<p><strong>To get help from a TA</strong>, If you do not have an in-person TA, you can reach your TA using this <a href="https://berkeley.zoom.us/j/91340395124?pwd=7Lqljf1tslL0QlufLz6HrBtSCB8Ojv.1">Zoom link</a>.</p>

<p>If there are fewer than 3 people in your group, feel free to merge your group with another group in the room.</p>

<p>Everybody say your name, and then figure out who is planning to travel outside
of the Bay Area the soonest. Feel free to discuss your travel plans.</p>


<h1 id="representing-lists">Representing Lists</h1>


<p>A Scheme call expression is a Scheme list that is represented using a <code>Pair</code>
instance in Python.</p>

<p>For example, the call expression <code>(+ (* 3 4) 5)</code> is represented as:</p>

<pre><code>Pair(&#x27;+&#x27;, Pair(Pair(&#x27;*&#x27;, Pair(3, Pair(4, nil))), Pair(5, nil)))</code></pre>



<p><img class="img-responsive center-block" src="https://i.imgur.com/I3972ut.png" alt="(+ (* 3 4) 5)" width="" height=""></p>

<p>The <code>Pair</code> class and <code>nil</code> object are defined in <a href="http://cs61a.org/proj/scheme/pair.py">pair.py</a> of the <a href="http://cs61a.org/proj/scheme">Scheme project</a>.</p>

<pre><code>class Pair:
    &quot;A Scheme list is a Pair in which rest is a Pair or nil.&quot;
    def __init__(self, first, rest):
        self.first = first
        self.rest = rest

    ... # There are also __str__, __repr__, and map methods, omitted here.</code></pre>




<h3 id="q1-representing-expressions">Q1: Representing Expressions</h3>

<p>Write the Scheme expression in Scheme syntax represented by each <code>Pair</code> below.
Try drawing the linked list diagram too. The first one is done for you.</p>

<pre><code>Pair(&#x27;+&#x27;, Pair(Pair(&#x27;*&#x27;, Pair(3, Pair(4, nil))), Pair(5, nil)))</code></pre>




            <label class="sr-only" for="scheme-plus-expr-input">Your Answer:</label>
            <input class="form-control storable" id="scheme-plus-expr-input" type="text">
            <div class="storable-status"></div>
        

<pre><code>&gt;&gt;&gt; Pair(&#x27;+&#x27;, Pair(1, Pair(Pair(&#x27;*&#x27;, Pair(2, Pair(3, nil))), nil)))</code></pre>




            <label class="sr-only" for="scheme-plus-expr-input">Your Answer:</label>
            <input class="form-control storable" id="scheme-plus-expr-input" type="text">
            <div class="storable-status"></div>
        


        <button id='toggle-1' class='btn btn-outline btn-lg alwaystoggle toggle'>
        Hint: Linked List Diagram<noscript> (enable JavaScript)</noscript>
        </button>
        <div class="solution toggle-1">

<p><img class="img-responsive center-block" src="https://i.imgur.com/LXubaoe.png" alt="" width="" height=""></p>

</div>

<pre><code>&gt;&gt;&gt; Pair(&#x27;and&#x27;, Pair(Pair(&#x27;&lt;&#x27;, Pair(1, Pair(0, nil))), Pair(Pair(&#x27;/&#x27;, Pair(1, Pair(0, nil))), nil)))</code></pre>




            <label class="sr-only" for="scheme-and-expr-input">Your Answer:</label>
            <input class="form-control storable" id="scheme-and-expr-input" type="text">
            <div class="storable-status"></div>
        

        <button id='toggle-2' class='btn btn-outline btn-lg alwaystoggle toggle'>
        Hint: Linked List Diagram<noscript> (enable JavaScript)</noscript>
        </button>
        <div class="solution toggle-2">
<img class="img-responsive center-block" src="https://i.imgur.com/nG9GUbt.png" alt="" width="" height="">

</div>



<p><strong>Discussion Time:</strong> What does <code>(and (&lt; 1 0) (/ 1 0))</code> evaluate to? Discuss among
your group until you all agree.</p>


        <button id='toggle-3' class='btn btn-outline btn-lg alwaystoggle toggle'>
        Answer<noscript> (enable JavaScript)</noscript>
        </button>
        <div class="solution toggle-3">
<code>#f</code>
</div>


<h1 id="evaluation">Evaluation</h1>


<p>To evaluate the expression <code>(+ (* 3 4) 5)</code> using the Project 4 interpreter,
<code>scheme_eval</code> is called on the following expressions (in this order):</p>

<ol>
  <li><code>(+ (* 3 4) 5)</code></li>
  <li><code>+</code></li>
  <li><code>(* 3 4)</code></li>
  <li><code>*</code></li>
  <li><code>3</code></li>
  <li><code>4</code></li>
  <li><code>5</code></li>
</ol>

<p><strong>Discussion time:</strong> Describe to each other why <code>*</code> is evaluated and what it
evaluates to.</p>


        <button id='toggle-4' class='btn btn-outline btn-lg alwaystoggle toggle'>
        Answer<noscript> (enable JavaScript)</noscript>
        </button>
        <div class="solution toggle-4">

<p>The <code>*</code> is evaluated because it is the operator sub-expression of <code>(* 3 4)</code>,
which is an operand sub-expression of <code>(+ (* 3 4) 5)</code>.</p>

<p>By default, <code>*</code> evaluates to a procedure that multiplies its arguments together.
But <code>*</code> could be redefined at any time, and so the symbol <code>*</code> must be evaluated
each time it is used in order to look up its current value.</p>

<pre><code>scm&gt; (* 2 3)  ; Now it multiplies
6
scm&gt; (define * +)
*
scm&gt; (* 2 3)  ; Now it adds
5</code></pre>



</div>

<p>An <code>if</code> expression is also a Scheme list represented using a <code>Pair</code> instance.</p>

<p>For example, <code>(if (&lt; x 0) (&#x2d; x) x)</code> is represented as:</p>

<p><code>Pair(&#x27;if&#x27;, Pair(Pair(&#x27;&lt;&#x27;, Pair(&#x27;x&#x27;, Pair(0, nil))), Pair(Pair(&#x27;&#x2d;&#x27;, Pair(&#x27;x&#x27;, nil)), Pair(&#x27;x&#x27;, nil))))</code></p>

<p><img class="img-responsive center-block" src="https://i.imgur.com/JySFkth.png" alt="" width="" height=""></p>

<p>To evaluate this expression in an environment in which <code>x</code> is bound to 2 (and
<code>&lt;</code> and <code>&#x2d;</code> have their default values), <code>scheme_eval</code> is called on the following
expressions (in this order):</p>

<ol>
  <li><code>(if (&lt; x 0) (&#x2d; x) x)</code></li>
  <li><code>(&lt; x 0)</code></li>
  <li><code>&lt;</code></li>
  <li><code>x</code></li>
  <li><code>0</code></li>
  <li><code>x</code></li>
</ol>

<p><strong>Presentation time:</strong> Come up with a short explanation of why neither <code>if</code> nor
<code>&#x2d;</code> are evaluated even though they both appear in <code>(if (&lt; x 0) (&#x2d; x) x)</code>. Once
your group agrees on an answer (or wants help), pick someone who hasn't presented to the course staff recently to share your group's answer with your TA (in person or on <a href="https://berkeley.zoom.us/j/91340395124?pwd=7Lqljf1tslL0QlufLz6HrBtSCB8Ojv.1">Zoom</a>).</p>




<h3 id="q2-evaluation">Q2: Evaluation</h3>

<p>(<em>Note</em>: Some past exams have had a question in exactly this format.)
Which of the following are evaluated when <code>scheme_eval</code> is called on
<code>(if (&lt; x 0) (&#x2d; x) (if (= x &#x2d;2) 100 y))</code> in an environment in which <code>x</code> is bound to -2?
(Assume <code>&lt;</code>, <code>&#x2d;</code>, and <code>=</code> have their default values.)</p>

<ul>
  <li><code>if</code></li>
  <li><code>&lt;</code></li>
  <li><code>=</code></li>
  <li><code>x</code></li>
  <li><code>y</code></li>
  <li><code>0</code></li>
  <li><code>&#x2d;2</code></li>
  <li><code>100</code></li>
  <li><code>&#x2d;</code></li>
  <li><code>(</code></li>
  <li><code>)</code></li>
</ul>


        <button id='toggle-5' class='btn btn-outline btn-lg alwaystoggle toggle'>
        Hint<noscript> (enable JavaScript)</noscript>
        </button>
        <div class="solution toggle-5">

<p>With <code>x</code> bound to -2, <code>(&lt; x 0)</code> evaluates to <code>#t</code>, and so <code>(&#x2d; x)</code> will be
evaluated, but <code>(if (= x 1) 100 x)</code> will not. The operator and operands of a
call expression are evaluated for every call expression that is evaluated.
<code>(&lt; x 0)</code> and <code>(&#x2d; x)</code> are both call expressions.</p>

</div>


<h3 id="q3-print-evaluated-expressions">Q3: Print Evaluated Expressions</h3>


<p>Define <code>print_evals</code>, which takes a Scheme expression <code>expr</code> that contains only
numbers, <code>+</code>, <code>*</code>, and parentheses. It prints all of the expressions that are
evaluated during the evaluation of <code>expr</code>. They are printed in the order that
they are passed to <code>scheme_eval</code>.</p>

<p><strong>Note:</strong> Calling <code>print</code> on a <code>Pair</code> instance will print the Scheme expression it represents.</p>

<pre><code>&gt;&gt;&gt; print(Pair(&#x27;+&#x27;, Pair(Pair(&#x27;*&#x27;, Pair(3, Pair(4, nil))), Pair(5, nil))))
(+ (* 3 4) 5)</code></pre>




            <div class="monaco-storable" id="print_evals-input" style="height:702px;"></div>
            <a href="javascript:void" id="modal-link-print_evals-input">Run in 61A Code</a>
            <div class="modal fade" id="modal-print_evals-input" tabindex="-1" role="dialog">
                <div class="modal-dialog modal-lg" role="document">
                    <div class="modal-content" style="padding-bottom: -5px">
                    <iframe
                        id="code-iframe-print_evals-input"
                        width="100%"
                        height="700px"
                        style="border: none; display:block;"
                    ></iframe>
                    </div>
                </div>
            </div>
            <div class="storable-status"></div>
            <script>
                $(() => activateEditor('def print_evals(expr):\n        &quot;&quot;&quot;Print the expressions that are evaluated while evaluating expr.\n\n        expr: a Scheme expression containing only (, ), +, *, and numbers.\n\n        &gt;&gt;&gt; nested_expr = Pair(&#x27;+&#x27;, Pair(Pair(&#x27;*&#x27;, Pair(3, Pair(4, nil))), Pair(5, nil)))\n        &gt;&gt;&gt; print_evals(nested_expr)\n        (+ (* 3 4) 5)\n        +\n        (* 3 4)\n        *\n        3\n        4\n        5\n        &gt;&gt;&gt; print_evals(Pair(&#x27;*&#x27;, Pair(6, Pair(7, Pair(nested_expr, Pair(8, nil))))))\n        (* 6 7 (+ (* 3 4) 5) 8)\n        *\n        6\n        7\n        (+ (* 3 4) 5)\n        +\n        (* 3 4)\n        *\n        3\n        4\n        5\n        8\n        &quot;&quot;&quot;\n        if not isinstance(expr, Pair):\n            "*** YOUR CODE HERE ***"\n        else:\n            "*** YOUR CODE HERE ***"\n\n', "python", "print_evals-input"));
            </script>
        


        <button id='toggle-6' class='btn btn-outline btn-lg alwaystoggle toggle'>
        Hint: Base Case<noscript> (enable JavaScript)</noscript>
        </button>
        <div class="solution toggle-6">

<p>If <code>expr</code> is not a pair, then it is a number or <code>&#x27;+&#x27;</code> or <code>&#x27;*&#x27;</code>. In all of these
cases, the <code>expr</code> should be printed to indicate that it would be evaluated.</p>

</div>


        <button id='toggle-7' class='btn btn-outline btn-lg alwaystoggle toggle'>
        Hint: Recursive Case<noscript> (enable JavaScript)</noscript>
        </button>
        <div class="solution toggle-7">

<p>If <code>expr</code> is a pair, then it is a call expression. Print it. Then, the operator
and operands are evaluated. These are the elements in the list <code>expr</code>. So,
iterate through <code>expr</code> (using either a <code>while</code> statement or <code>expr.map(...)</code>) and
call <code>print_evals</code> on each element.</p>

</div>


<h1 id="document-the-occasion">Document the Occasion</h1>


<p>Please all fill out the <a href="https://forms.gle/UCYakosihNmKSuZE9">attendance form</a> (one submission per person per week).</p>
<script>
    $('.alwaystoggle').css('display', 'inline-block');
    $('.alwaystoggle').click(function() {
      var solution_id = $(this).attr('id');
      $('div.' + solution_id).slideToggle(600);
    });
</script>

  </div>

  <div class='col-md-3 sticky'>
    <nav class='hidden-print hidden-sm hidden-xs sidebar'>
      <ul>
  <li><a href="#getting-started">Getting Started</a></li>
  <li><a href="#representing-lists">Representing Lists</a></li>
  <ul>
    <li><a href="#q1-representing-expressions">Q1: Representing Expressions</a></li>
  </ul>
  <li><a href="#evaluation">Evaluation</a></li>
  <ul>
    <li><a href="#q2-evaluation">Q2: Evaluation</a></li>
    <li><a href="#q3-print-evaluated-expressions">Q3: Print Evaluated Expressions</a></li>
  </ul>
  <li><a href="#document-the-occasion">Document the Occasion</a></li>
</ul>
    </nav>
  </div>
</div>

    </main>

    <!-- <footer class="container">
      <div class="row text-center">
        <div class="col col-sm-4">
          <h3><a href="/">CS 61A</a></h3>
          <ul class="nav nav-pills nav-stacked">
            <li><a href="/weekly">Weekly Schedule</a></li>
            <li><a href="/office-hours">Office Hours</a></li>
            <li><a href="/staff">Staff</a></li>
          </ul>
        </div>
        <div class="col col-sm-4">
          <h3><a href="/resources">Resources</a></h3>
          <ul class="nav nav-pills nav-stacked">
            <li><a href="/articles/studying">Studying Guide</a></li>
            <li><a href="/articles/debugging">Debugging Guide</a></li>
            <li><a href="/articles/composition">Composition Guide</a></li>
            <li><a href="/articles/pair-programming">Pair Programming</a></li>
          </ul>
        </div>
        <div class="col col-sm-4">
          <h3><a href="/articles/about">Policies</a></h3>
          <ul class="nav nav-pills nav-stacked">
            <li><a href="/articles/about#assignments">Assignments</a></li>
            <li><a href="/articles/about#exams">Exams</a></li>
            <li><a href="/articles/about#grading">Grading</a></li>
          </ul>
        </div>
      </div>
    </footer> -->

    

    <script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.20.0/min/vs/loader.min.js"></script>
  <link rel="stylesheet" data-name="vs/editor/editor.main" href="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.20.0/min/vs/editor/editor.main.min.css">
  <script>
      require.config({ paths: { 'vs': 'https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.20.0/min/vs' }});
      window.MonacoEnvironment = { getWorkerUrl: () => URL.createObjectURL(new Blob([`
      self.MonacoEnvironment = {
          baseUrl: 'https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.20.0/min'
      };
      importScripts('https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.20.0/min/vs/base/worker/workerMain.min.js');
  `], { type: 'text/javascript' }))
  };
  </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jsPlumb/2.15.5/js/jsplumb.min.js"></script>
    <script src="/assets/js/network_storage.js"></script>
    <script src="/assets/js/code_tabindex.js"></script>
    <script src="/assets/js/storable.js"></script>
    <script src="/assets/js/editor.js"></script>
    <script src="/assets/js/copy-button.js"></script>
    <script src="/assets/js/env-diagram.js"></script>
    
<!-- <script src="/assets/js/sketchy.js"></script> -->
<script>
  $('.sidebar ul').addClass('nav nav-stacked noselect');
  $('body').scrollspy({
    target: '.sidebar',
    offset: 40
  });

  function goToId(id) {
    var target = $(id);
    target.parent().show();
    $('html,body').animate({
      scrollTop: target.offset().top,
    }, 100);
    $("body").scrollspy('refresh');
  }

  if (location.hash) {
    setTimeout(function() {
      if (location.hash) {
        goToId(location.hash);
      }
    }, 1);
  }

  $("a").click(function(event) {
    var urlBeforeHashRegEx = new RegExp("^"+window.location.href.split("#")[0]);
    if (/^#/.test(this.hash) && urlBeforeHashRegEx.test(this.href)) {
      event.preventDefault();
      goToId(this.hash);
      document.location.hash = this.hash;
    }
  });
</script>

  </body>
</html>